/**
 * Lib de selecteur de noeuds
 * @author hakurou
 * @version 1.0.0
 */
!function(){"use strict";"undefined"==typeof window.piou&&(window.piou={});var e={qs:"undefined"!=typeof document.querySelector,getAll:function(e){if(e.all)var t=e.all;else var t=e.getElementsByTagName("*");var i=[];return this.each(t,function(){"html"!=this.nodeName.toLowerCase()&&i.push(this)}),i},getByAttr:function(t,i,n,s){if(null!=s)return this.getByAttrIn(t,i,n,s);if(null!=n)return this.getByAttrFrom(t,i,n,s);if(this.qs)return i.querySelectorAll(t[0]);var o=[],a=this.getAll(i);return this.each(a,function(){e.isAttrOk(t,this)&&o.push(this)}),o},getByAttrIn:function(t,i,n,s){var o=[];return this.each(s,function(){e.isAttrOk(t,this)&&o.push(this)}),o},getByAttrFrom:function(t,i,n){var s=[];return this.each(n,function(){var i=e.getByAttr(t,this);e.each(i,function(){s.push(this)})}),s},isAttrOk:function(e,t){if(2==e.length)return t.hasAttribute(e[1]);if(4==e.length){var i=this.regProtect(e[3]),n=null;if(n="class"==e[1]?t.className:t.getAttribute(e[1]),"="==e[2])return n&&n==e[3];if("*="==e[2])return n&&n.match(i);if("|="==e[2])return n&&n.match(new RegExp("-"+i+"-|^"+i+"-|-"+i+"$|^"+i+"$"));if("^="==e[2])return n&&n.match("^"+i);if("$="==e[2])return n&&n.match(i+"$");if("~="==e[2])return n&&n.match(new RegExp("s+"+i+"s+|^"+i+"s+|s+"+i+"$|^"+i+"$"))}return!1},regProtect:function(e){return e=e.replace(/\./g,"\\."),e=e.replace(/\[/g,"\\["),e=e.replace(/\]/g,"\\]"),e=e.replace(/\(/g,"\\("),e=e.replace(/\)/g,"\\)"),e=e.replace(/\+/g,"\\+"),e=e.replace(/\*/g,"\\*"),e=e.replace(/\?/g,"\\?")},getById:function(e,t,i,n){return null!=n?this.getByIdIn(e,t,i,n):null!=i?this.getByIdFrom(e,t,i,n):this.qs?t.querySelector(e[0]):t.getElementById(e[1])},getByIdFrom:function(e,t,i){var n=this.getById(e,t);if(null==n)return[];var s=[],o=n;do o=o.parentNode,this.each(i,function(){o==this&&(s=[n])});while(null!=o&&null==s);return s},getByIdIn:function(e,t,i,n){var s=[];return this.each(n,function(){this.id==e[1]&&(s=[this])}),s},getByClass:function(e,t,i,n){return null!=n?this.getByClassIn(e,t,i,n):null!=i?this.getByClassFrom(e,t,i,n):this.qs?t.querySelectorAll(e[0]):"undefined"!=typeof t.getElementsByClassName?t.getElementsByClassName(e[1]):this.getByClass(e,t,i,this.getAll(t))},getByClassFrom:function(t,i,n){var s=[];return this.each(n,function(){var i=e.getByClass(t,this);e.each(i,function(){s.push(this)})}),s},getByClassIn:function(e,t,i,n){var s=[];return this.each(n,function(){this.className.match(new RegExp("s+"+e[1]+"s+|^"+e[1]+"$|s+"+e[1]+"$|^"+e[1]+"s+"))&&s.push(this)}),s},getByTag:function(e,t,i,n){return null!=n?this.getByTagIn(e,t,i,n):null!=i?this.getByTagFrom(e,t,i,n):this.qs?t.querySelectorAll(e[1]):t.getElementsByTagName(e[1])},getByTagIn:function(e,t,i,n){var s=[];return this.each(n,function(){this.nodeName.toLowerCase()==e[1].toLowerCase()&&s.push(this)}),s},getByTagFrom:function(t,i,n){var s=[];return this.each(n,function(){var i=e.getByTag(t,this);e.each(i,function(){s.push(this)})}),s},getByPseu:function(e,t,i,n){var s=[];if(null!=n)return this.getByPseuIn(e,t,i,n);if(null!=i)return this.getByPseuFrom(e,t,i,n);if(this.qs&&(s=t.querySelectorAll(e[0])),0==s.length){var o=this.getAll(t);return this.getByPseu(e,t,i,o)}return s},getByPseuIn:function(e,t,n,s){var o=[];if("undefined"!=typeof i.pseu[e[1]]){var a=null!=e[2]?e[2].split(/\s*,\s*/):[];this.each(s,function(){i.pseu[e[1]].apply(this,a)&&o.push(this)})}return o},getByPseuFrom:function(t,i,n){var s=[];return this.each(n,function(){var i=e.getByPseu(t,this);e.each(i,function(){s.push(this)})}),s},nthChild:function(e,t,i){var n=null;return 0==t|null==t&&null!=i&&i>=0?e==i:"-"==t&&null!=i?-e+parseInt(i)>=0:null!=i?(n=(e-i)/t)!==!1&&n>=0&&parseInt(n)==n:null==i?0==e%t:!1},getNodePosition:function(e,t,i){var n=0,s=0,o=!1;return this.each(e.parentNode.childNodes,function(){(null==t||e.nodeName.toLowerCase()==t)&&s++,o||n++,e!=this||null!=t&&e.nodeName.toLowerCase()!=t||(o=!0)}),i?s-n+1:n},nth:function(t,i,n,s){var o=1,a=null;return o=e.getNodePosition(t,s,n?!0:!1),"even"==i&&0==o%2||"odd"==i&&0!=o%2||i.match(/^\d+$/)&&i==o?!0:(a=i.match(/^((-|\+)?(\d+)?)n((-|\+)\d+)?$/))?e.nthChild(o,null!=a[1]?a[1]:null,null!=a[4]?a[4]:null):!1},each:function(e,t){if(null!=e&&((null==e.length||null!=e.nodeType)&&(e=[e]),e.length>0))for(var i=0,n=e.length;n>i;++i)1==e[i].nodeType&&t.call(e[i],i)}},t=function(){var t=function(e,t){this.pt={id:/^#([\w-]+)/,"class":/^\.([\w-]+)/,tag:/^([\w-]+)/,blank:/^\s+/,tilde:/^~\s+?/,add:/^\+\s+?/,children:/^>\s+?/,pseu:/^:([\w-]+)/,pseuArg:/^:([\w-]+)\(([^\)]+)\)/,attrCpx:/^\[([\w-]+)(=|\*=|\|=|\^=|\$=|~=)([^\]]+)\]/,attr:/^\[([\w-]+)\]/},this.str=e,this.context=t};return t.prototype={parse:function(e,t){this.match(this.pt.blank);var i=this.parseExp(e,t);return null!=i&&null==i.length?[i]:i},getChildrenExp:function(t,i){var n=[];return e.each(i,function(){e.each(this.childNodes,function(){n.push(this)})}),this.parseExp(t,n)},getSiblingExp:function(t,i){var n=[];return e.each(i,function(){var e=this.nextElementSibling;do 1==e.nodeType&&n.push(e),e=e.nextElementSibling;while(null!=e)}),this.parseExp(t,n)},getNextNodeExp:function(t,i){var n=[];return e.each(i,function(){for(var e=this.nextElementSibling;null!=e;){if(1==e.nodeType){n.push(e);break}e=e.nextElementSibling}}),this.parseExp(t,n)},parseExp:function(e,t){var i=this.parseBase(e,t);return this.match(this.pt.blank)&&this.str.length>0&&(i=null!=this.match(this.pt.children)?this.getChildrenExp(e,i):null!=this.match(this.pt.add)?this.getNextNodeExp(e,i):null!=this.match(this.pt.tilde)?this.getSiblingExp(e,i):this.parseExp(i,t)),i},parseBase:function(t,i){var n=null,s=null;if(null!=(s=this.match(this.pt.tag))){n=e.getByTag(s,this.context,t,i);var o=this.parseSuit(t,n);null!=o&&(n=o)}else n=this.parseSup(t,i);if(null==n)throw"piou-selector::parseBase: Error, node not found";return n},parseSuit:function(e,t){return this.parseSup(e,t)},parseSup:function(t,i){var n=null,s=null;if(null!=(s=this.match(this.pt.id))?n=e.getById(s,this.context,t,i):null!=(s=this.match(this.pt["class"]))?n=e.getByClass(s,this.context,t,i):(n=this.parsePseu(t,i),null==n&&(n=this.parseAttr(t,i))),null!=n){var s=this.parseSuit(t,n);null!=s&&(n=s)}return n},parsePseu:function(t,i){var n=null,s=null;return(null!=(s=this.match(this.pt.pseuArg))||null!=(s=this.match(this.pt.pseu)))&&(n=e.getByPseu(s,this.context,t,i)),n},parseAttr:function(t,i){var n=null,s=null;return(null!=(s=this.match(this.pt.attr))||null!=(s=this.match(this.pt.attrCpx)))&&(n=e.getByAttr(s,this.context,t,i)),n},match:function(e){var t=null;return(t=this.str.match(e))&&(this.str=this.str.substr(t[0].length)),t}},t}(),i=function(i,n){null==n&&(n=document);var s=[],o=i.split(/,/g);for(var a in o){var r=new t(o[a],n),l=r.parse();console.log(l),e.each(l,function(){s.push(this)})}return s};i.query=e,i.pseu={"first-child":function(){for(var e=this.parentNode.childNodes,t=0,i=e.length;i>t&&1!=e[t].nodeType;++t);return e[t]==this},"nth-child":function(t){return e.nth(this,t)},"nth-last-child":function(t){return e.nth(this,t,!0)},"last-child":function(){for(var e=this.parentNode.childNodes,t=e.length-1;t>0&&1!=e[t].nodeType;--t);return e[t]==this},"nth-of-type":function(t){return e.nth(this,t,!1,this.nodeName.toLowerCase())},"nth-last-of-type":function(t){return e.nth(this,t,!0,this.nodeName.toLowerCase())},"first-of-type":function(){for(var e=this.parentNode.childNodes,t=0,i=e.length;i>t&&(1!=e[t].nodeType||this.nodeName.toLowerCase()!=e[t].nodeName.toLowerCase());++t);return e[t]==this},"last-of-type":function(){for(var e=this.parentNode.childNodes,t=e.length-1;t>=0&&(1!=e[t].nodeType||this.nodeName.toLowerCase()!=e[t].nodeName.toLowerCase());--t);return e[t]==this},"only-child":function(){var t=0;return e.each(this.parentNode.childNodes,function(){t++}),1==t},empty:function(){return 0==this.childNodes.length},not:function(e){var i=new t(e,document);return 0==i.parse(null,this).length},checked:function(){return this.checked?!0:!1}},i.version="1.0.0",window.piou.selector=i}();