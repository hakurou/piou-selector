/**
 * Lib de selecteur de noeuds
 * @author hakurou
 * @version 1.0.0
 */
!function(){"use strict";"undefined"==typeof window.piou&&(window.piou={});var e={qs:!1,getAll:function(e){if(e.all)var t=e.all;else var t=e.getElementsByTagName("*");var n=[];return this.each(t,function(){"html"!=this.nodeName.toLowerCase()&&n.push(this)}),n},getByAttr:function(t,n,i,a){if(null!=a)return this.getByAttrIn(t,n,i,a);if(null!=i)return this.getByAttrFrom(t,n,i,a);if(this.qs)return n.querySelectorAll(t[0]);var r=[],o=this.getAll(n);return this.each(o,function(){e.isAttrOk(t,this)&&r.push(this)}),r},getByAttrIn:function(t,n,i,a){var r=[];return this.each(a,function(){e.isAttrOk(t,this)&&r.push(this)}),r},getByAttrFrom:function(t,n,i){var a=[];return this.each(i,function(){var n=e.getByAttr(t,this);e.each(n,function(){a.push(this)})}),a},isAttrOk:function(e,t){if(2==e.length)return t.hasAttribute(e[1]);if(4==e.length){var n=this.regProtect(e[3]),i=null;if(i="class"==e[1]?t.className:t.hasAttribute(e[1]),"="==e[2])return i&&i==e[3];if("*="==e[2])return i&&i.match(n);if("|="==e[2])return i&&i.match(new RegExp("-"+n+"-|^"+n+"-|-"+n+"$|^"+n+"$"));if("^="==e[2])return i&&i.match("^"+n);if("$="==e[2])return i&&i.match(n+"$");if("~="==e[2])return i&&i.match(new RegExp("s+"+n+"s+|^"+n+"s+|s+"+n+"$|^"+n+"$"))}return!1},regProtect:function(e){return e=e.replace(/\./g,"\\."),e=e.replace(/\[/g,"\\["),e=e.replace(/\]/g,"\\]"),e=e.replace(/\(/g,"\\("),e=e.replace(/\)/g,"\\)"),e=e.replace(/\+/g,"\\+"),e=e.replace(/\*/g,"\\*"),e=e.replace(/\?/g,"\\?")},getById:function(e,t,n,i){return null!=i?this.getByIdIn(e,t,n,i):null!=n?this.getByIdFrom(e,t,n,i):this.qs?t.querySelector(e[0]):t.getElementById(e[1])},getByIdFrom:function(e,t,n){var i=this.getById(e,t);if(null==i)return[];var a=[],r=i;do r=r.parentNode,this.each(n,function(){r==this&&(a=[i])});while(null!=r&&null==a);return a},getByIdIn:function(e,t,n,i){var a=[];return this.each(i,function(){this.id==e[1]&&(a=[this])}),a},getByClass:function(e,t,n,i){return null!=i?this.getByClassIn(e,t,n,i):null!=n?this.getByClassFrom(e,t,n,i):this.qs?t.querySelectorAll(e[0]):"undefined"!=typeof t.getElementsByClassName?t.getElementsByClassName(e[1]):this.getByClass(e,t,n,this.getAll(t))},getByClassFrom:function(t,n,i){var a=[];return this.each(i,function(){var n=e.getByClass(t,this);e.each(n,function(){a.push(this)})}),a},getByClassIn:function(e,t,n,i){var a=[];return this.each(i,function(){this.className.match(new RegExp("s+"+e[1]+"s+|^"+e[1]+"$|s+"+e[1]+"$|^"+e[1]+"s+"))&&a.push(this)}),a},getByTag:function(e,t,n,i){return null!=i?this.getByTagIn(e,t,n,i):null!=n?this.getByTagFrom(e,t,n,i):this.qs?t.querySelectorAll(e[1]):t.getElementsByTagName(e[1])},getByTagIn:function(e,t,n,i){var a=[];return this.each(i,function(){this.nodeName.toLowerCase()==e[1].toLowerCase()&&a.push(this)}),a},getByTagFrom:function(t,n,i){var a=[];return this.each(i,function(){var n=e.getByTag(t,this);e.each(n,function(){a.push(this)})}),a},getByPseu:function(e,t,n,i){var a=[];if(null!=i)return this.getByPseuIn(e,t,n,i);if(null!=n)return this.getByPseuFrom(e,t,n,i);if(this.qs&&(a=t.querySelectorAll(e[0])),0==a.length){var r=this.getAll(t);return this.getByPseu(e,t,n,r)}return a},getByPseuIn:function(e,t,i,a){var r=[];if("undefined"!=typeof n.pseu[e[1]]){var o=null!=e[2]?e[2].split(/\s*,\s*/):[];this.each(a,function(){n.pseu[e[1]].apply(this,o)&&r.push(this)})}return r},getByPseuFrom:function(t,n,i){var a=[];return this.each(i,function(){var n=e.getByPseu(t,this);e.each(n,function(){a.push(this)})}),a},nthChild:function(e,t,n){var i=null;return 0==t|null==t&&null!=n&&n>=0?e==n:"-"==t&&null!=n?-e+parseInt(n)>=0:null!=n?(i=(e-n)/t)!==!1&&i>=0&&parseInt(i)==i:null==n?0==e%t:!1},getNodePosition:function(e,t,n){var i=0,a=0,r=!1;return this.each(e.parentNode.childNodes,function(){(null==t||e.nodeName.toLowerCase()==t)&&a++,r||i++,e!=this||null!=t&&e.nodeName.toLowerCase()!=t||(r=!0)}),n?a-i+1:i},nth:function(t,n,i,a){var r=1,o=null;return r=e.getNodePosition(t,a,i?!0:!1),"even"==n&&0==r%2||"odd"==n&&0!=r%2||n.match(/^\d+$/)&&n==r?!0:(o=n.match(/^((-|\+)?(\d+)?)n((-|\+)\d+)?$/))?e.nthChild(r,null!=o[1]?o[1]:null,null!=o[4]?o[4]:null):!1},each:function(e,t){if(null!=e&&(null==e.length&&(e=[e]),e.length>0))for(var n=0,i=e.length;i>n;++n)1==e[n].nodeType&&t.call(e[n],n)}},t=function(){var t=function(e,t){this.pt={id:/^#([\w-]+)/,"class":/^\.([\w-]+)/,tag:/^([\w-]+)/,blank:/^\s+/,tilde:/^~\s+?/,add:/^\+\s+?/,children:/^>\s+?/,pseu:/^:([\w-]+)/,pseuArg:/^:([\w-]+)\(([^\)]+)\)/,attrCpx:/^\[([\w-]+)(=|\*=|\|=|\^=|\$=|~=)([^\]]+)\]/,attr:/^\[([\w-]+)\]/},this.str=e,this.context=t};return t.prototype={parse:function(e,t){this.match(this.pt.blank);var n=this.parseExp(e,t);return null!=n&&null==n.length?[n]:n},getChildrenExp:function(t,n){var i=[];return e.each(n,function(){e.each(this.childNodes,function(){i.push(this)})}),this.parseExp(t,i)},getSiblingExp:function(t,n){var i=[];return e.each(n,function(){var e=this.nextElementSibling;do 1==e.nodeType&&i.push(e),e=e.nextElementSibling;while(null!=e)}),this.parseExp(t,i)},getNextNodeExp:function(t,n){var i=[];return e.each(n,function(){for(var e=this.nextElementSibling;null!=e;){if(1==e.nodeType){i.push(e);break}e=e.nextElementSibling}}),this.parseExp(t,i)},parseExp:function(e,t){var n=this.parseBase(e,t);return this.match(this.pt.blank)&&this.str.length>0&&(n=null!=this.match(this.pt.children)?this.getChildrenExp(e,n):null!=this.match(this.pt.add)?this.getNextNodeExp(e,n):null!=this.match(this.pt.tilde)?this.getSiblingExp(e,n):this.parseExp(n,t)),n},parseBase:function(t,n){var i=null,a=null;if(null!=(a=this.match(this.pt.tag))){i=e.getByTag(a,this.context,t,n);var r=this.parseSuit(t,i);null!=r&&(i=r)}else i=this.parseSup(t,n);if(null==i)throw"piou-selector::parseBase: Error, node not found";return i},parseSuit:function(e,t){return this.parseSup(e,t)},parseSup:function(t,n){var i=null,a=null;if(null!=(a=this.match(this.pt.id))?i=e.getById(a,this.context,t,n):null!=(a=this.match(this.pt["class"]))?i=e.getByClass(a,this.context,t,n):(i=this.parsePseu(t,n),null==i&&(i=this.parseAttr(t,n))),null!=i){var a=this.parseSuit(t,i);null!=a&&(i=a)}return i},parsePseu:function(t,n){var i=null,a=null;return(null!=(a=this.match(this.pt.pseuArg))||null!=(a=this.match(this.pt.pseu)))&&(i=e.getByPseu(a,this.context,t,n)),i},parseAttr:function(t,n){var i=null,a=null;return(null!=(a=this.match(this.pt.attr))||null!=(a=this.match(this.pt.attrCpx)))&&(i=e.getByAttr(a,this.context,t,n)),i},match:function(e){var t=null;return(t=this.str.match(e))&&(this.str=this.str.substr(t[0].length)),t}},t}(),n=function(n,i){null==i&&(i=document);var a=[],r=n.split(/,/g);for(var o in r){var s=new t(r[o],i),l=s.parse();e.each(l,function(){a.push(this)})}return a};n.query=e,n.pseu={"first-child":function(){for(var e=this.parentNode.childNodes,t=0,n=e.length;n>t&&1!=e[t].nodeType;++t);return e[t]==this},"nth-child":function(t){return e.nth(this,t)},"nth-last-child":function(t){return e.nth(this,t,!0)},"last-child":function(){for(var e=this.parentNode.childNodes,t=e.length-1;t>0&&1!=e[t].nodeType;--t);return e[t]==this},"nth-of-type":function(t){return e.nth(this,t,!1,this.nodeName.toLowerCase())},"nth-last-of-type":function(t){return e.nth(this,t,!0,this.nodeName.toLowerCase())},"first-of-type":function(){for(var e=this.parentNode.childNodes,t=0,n=e.length;n>t&&(1!=e[t].nodeType||this.nodeName.toLowerCase()!=e[t].nodeName.toLowerCase());++t);return e[t]==this},"last-of-type":function(){for(var e=this.parentNode.childNodes,t=e.length-1;t>=0&&(1!=e[t].nodeType||this.nodeName.toLowerCase()!=e[t].nodeName.toLowerCase());--t);return e[t]==this},"only-child":function(){var t=0;return e.each(this.parentNode.childNodes,function(){t++}),1==t},empty:function(){return 0==this.childNodes.length},not:function(e){var n=new t(e,document);return 0==n.parse(null,this).length},checked:function(){return this.checked?!0:!1}},n.version="1.0.0",window.piou.selector=n}();